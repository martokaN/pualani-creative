---
import { Image } from "astro:assets";

const categories = ["babymoon", "couple", "elopements", "family", "proposals"];

const images = import.meta.glob("../assets/gallery/*/*.jpg", { eager: true, import: "default" });

const galleryImages = Object.entries(images).map(([path, image]) => {
  const parts = path.split("/");
  const category = parts[parts.length - 2];
  return { src: image, category };
});
---
<div class="columns-1 sm:columns-2 md:columns-3 lg:columns-4 gap-4 space-y-4">
  {galleryImages.length === 0 ? (
    <p>No images found!</p>
  ) : (
    galleryImages.map(({ src, category }, index) => (
      <div class="break-inside-avoid overflow-hidden rounded-2xl shadow">
        <Image
          src={src}
          alt={category}
          class="w-full h-auto rounded-2xl"
          loading="lazy"
          sizes="(min-width: 768px) 25vw, 50vw"
          format="webp"
        />
      </div>
    ))
  )}
</div>
