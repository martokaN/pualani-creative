---
const honeybookPid = import.meta.env.HONEYBOOK_PID;
---

<div class="relative min-h-[calc(100vh-96px-64px-32px)]">
  <!-- Loader -->
  <div id="formLoader" class="absolute inset-0 flex items-center justify-center">
    <div class="w-12 h-12 border-4 border-heading border-t-transparent rounded-full animate-spin"></div>
  </div>
  
  <!-- HoneyBook Form -->
  <div class={`hb-p-${honeybookPid}-2`}></div>
  <img height="1" width="1" style="display:none" src={`https://www.honeybook.com/p.png?pid=${honeybookPid}`}>
</div>


<script define:vars={{ honeybookPid }}>
  (function(h,b,s,n,i,p,e,t) {
    h._HB_ = h._HB_ || {};h._HB_.pid = i;;;;
    t=b.createElement(s);t.type="text/javascript";t.async=!0;t.src=n;
    e=b.getElementsByTagName(s)[0];e.parentNode.insertBefore(t,e);
  })(window,document,"script","https://widget.honeybook.com/assets_users_production/websiteplacements/placement-controller.min.js", honeybookPid);
  

  
  // Hide loader once form is loaded
  document.addEventListener('DOMContentLoaded', () => {
    const checkFormLoaded = setInterval(() => {
      const formElements = document.querySelector(`.hb-p-${honeybookPid}-2`).children;
      if (formElements.length > 0) {
        document.getElementById('formLoader').style.display = 'none';
        clearInterval(checkFormLoaded);
      }
    }, 500);
    
    // Fallback timeout
    setTimeout(() => {
      document.getElementById('formLoader').style.display = 'none';
      clearInterval(checkFormLoaded);
    }, 8000);
  });
</script>